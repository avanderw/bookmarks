import{s as Tt,f as T,a as D,g as w,h as P,c as E,A as $t,d as h,j as N,i as M,x as f,B as dt,C as lt,y as ot,D as Kt,z as Ut,E as yt,e as Bt,k as Qt,l as A,m as O,F as It,G as Pt,n as x,H as Wt,p as gt,I as Xt,J as bt,K as Vt}from"../chunks/scheduler.b7da2a3c.js";import{S as wt,i as Nt,f as vt,b as tt,d as et,m as st,a as V,g as Yt,c as Zt,t as Q,e as nt}from"../chunks/index.e63a62ef.js";import{w as xt}from"../chunks/index.a26bc50e.js";function St(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}let Gt=[];{const t=localStorage.getItem("bookmarks");t&&(Gt=JSON.parse(t))}const z=xt(Gt);z.subscribe(t=>{localStorage.setItem("bookmarks",JSON.stringify(t))});function te(t){let e,n,s,l,o,i,c="add",g,d;return{c(){e=T("form"),n=T("input"),s=D(),l=T("input"),o=D(),i=T("button"),i.textContent=c,this.h()},l(r){e=w(r,"FORM",{});var u=P(e);n=w(u,"INPUT",{placeholder:!0}),s=E(u),l=w(u,"INPUT",{placeholder:!0}),o=E(u),i=w(u,"BUTTON",{type:!0,"data-svelte-h":!0}),$t(i)!=="svelte-7seci"&&(i.textContent=c),u.forEach(h),this.h()},h(){N(n,"placeholder","URL"),N(l,"placeholder","Title"),N(i,"type","submit")},m(r,u){M(r,e,u),f(e,n),dt(n,t[0]),f(e,s),f(e,l),dt(l,t[1]),f(e,o),f(e,i),g||(d=[lt(n,"input",t[3]),lt(l,"input",t[4]),lt(e,"submit",t[2])],g=!0)},p(r,[u]){u&1&&n.value!==r[0]&&dt(n,r[0]),u&2&&l.value!==r[1]&&dt(l,r[1])},i:ot,o:ot,d(r){r&&h(e),g=!1,Kt(d)}}}function ee(t,e,n){let s;Ut(t,z,d=>n(5,s=d));let l="",o="";function i(){yt(z,s=[...s,{id:s.length,title:o,href:l,added:new Date,clicked:0,last:null}],s),n(0,l=""),n(1,o="")}function c(){l=this.value,n(0,l)}function g(){o=this.value,n(1,o)}return[l,o,i,c,g]}class se extends wt{constructor(e){super(),Nt(this,e,ee,te,Tt,{})}}function Et(t){if(!t)return"never";const n=new Date().getTime()-new Date(t).getTime(),s=Math.floor(n/1e3),l=Math.floor(s/60),o=Math.floor(l/60);if(o>24){const i=Math.floor(o/24);return i>1?`${i} days ago`:`${i} day ago`}return o>1?`${o} hours ago`:o===1?`${o} hour ago`:l>1?`${l} minutes ago`:s>1?`${s} seconds ago`:"just now"}function Mt(t){let e,n,s;return{c(){e=T("input"),this.h()},l(l){e=w(l,"INPUT",{type:!0}),this.h()},h(){N(e,"type","text"),e.autofocus=!0},m(l,o){M(l,e,o),dt(e,t[2]),e.focus(),n||(s=lt(e,"input",t[4]),n=!0)},p(l,o){o&4&&e.value!==l[2]&&dt(e,l[2])},d(l){l&&h(e),n=!1,s()}}}function Ft(t){let e,n="!AddTag:id";return{c(){e=T("span"),e.textContent=n,this.h()},l(s){e=w(s,"SPAN",{style:!0,"data-svelte-h":!0}),$t(e)!=="svelte-xkb9dd"&&(e.textContent=n),this.h()},h(){Qt(e,"color","#cc0000")},m(s,l){M(s,e,l)},d(s){s&&h(e)}}}function ne(t){let e,n,s,l="add",o,i,c,g,d=t[1]!=="idle"&&Mt(t),r=t[0]===void 0&&Ft();return{c(){e=T("form"),d&&d.c(),n=D(),s=T("button"),s.textContent=l,o=D(),r&&r.c(),i=Bt(),this.h()},l(u){e=w(u,"FORM",{class:!0});var v=P(e);d&&d.l(v),n=E(v),s=w(v,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),$t(s)!=="svelte-7seci"&&(s.textContent=l),v.forEach(h),o=E(u),r&&r.l(u),i=Bt(),this.h()},h(){N(s,"type","submit"),N(s,"class","svelte-13df6dh"),N(e,"class","svelte-13df6dh")},m(u,v){M(u,e,v),d&&d.m(e,null),f(e,n),f(e,s),M(u,o,v),r&&r.m(u,v),M(u,i,v),c||(g=lt(e,"submit",t[3]),c=!0)},p(u,[v]){u[1]!=="idle"?d?d.p(u,v):(d=Mt(u),d.c(),d.m(e,n)):d&&(d.d(1),d=null),u[0]===void 0?r||(r=Ft(),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:ot,o:ot,d(u){u&&(h(e),h(o),h(i)),d&&d.d(),r&&r.d(u),c=!1,g()}}}function le(t,e,n){let s;Ut(t,z,r=>n(5,s=r));let{id:l}=e,o="idle",i="";function c(){o==="idle"?n(1,o="adding"):(g(),n(1,o="idle"),n(2,i=""))}function g(){const r=s.find(u=>u.id===l);r.tags||(r.tags=[]),r.tags=[...r.tags,i],z.set(s)}function d(){i=this.value,n(2,i)}return t.$$set=r=>{"id"in r&&n(0,l=r.id)},[l,o,i,c,d]}class oe extends wt{constructor(e){super(),Nt(this,e,le,ne,Tt,{id:0})}}function ie(t){let e,n,s,l,o;return{c(){e=T("button"),n=A(t[1]),this.h()},l(i){e=w(i,"BUTTON",{class:!0});var c=P(e);n=O(c,t[1]),c.forEach(h),this.h()},h(){N(e,"class",s=It(t[2]?"desc":"asc")+" svelte-f6w2c0"),Pt(e,"active",t[0])},m(i,c){M(i,e,c),f(e,n),l||(o=lt(e,"click",t[3]),l=!0)},p(i,[c]){c&2&&x(n,i[1]),c&4&&s!==(s=It(i[2]?"desc":"asc")+" svelte-f6w2c0")&&N(e,"class",s),c&5&&Pt(e,"active",i[0])},i:ot,o:ot,d(i){i&&h(e),l=!1,o()}}}function ae(t,e,n){let{list:s}=e,{field:l}=e,{func:o=void 0}=e,{active:i=!1}=e,{initDesc:c=!0}=e;const g=Wt();let d=c;function r(){g("sort",{}),o?s.sort((u,v)=>o(u)-o(v)):s.sort((u,v)=>u.title>v.title?1:u.title<v.title?-1:0),n(2,d=i?!d:c),d&&s.reverse(),n(0,i=!0),n(4,s)}return t.$$set=u=>{"list"in u&&n(4,s=u.list),"field"in u&&n(1,l=u.field),"func"in u&&n(5,o=u.func),"active"in u&&n(0,i=u.active),"initDesc"in u&&n(6,c=u.initDesc)},[i,l,d,r,s,o,c]}class kt extends wt{constructor(e){super(),Nt(this,e,ae,ie,Tt,{list:4,field:1,func:5,active:0,initDesc:6})}}function Jt(t,e,n){const s=t.slice();return s[17]=e[n],s}function Lt(t,e,n){const s=t.slice();return s[20]=e[n],s}function Rt(t){let e,n=St(t[17].tags),s=[];for(let l=0;l<n.length;l+=1)s[l]=jt(Lt(t,n,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=Bt()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=Bt()},m(l,o){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(l,o);M(l,e,o)},p(l,o){if(o&2){n=St(l[17].tags);let i;for(i=0;i<n.length;i+=1){const c=Lt(l,n,i);s[i]?s[i].p(c,o):(s[i]=jt(c),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},d(l){l&&h(e),Vt(s,l)}}}function jt(t){let e,n=t[20]+"",s;return{c(){e=T("button"),s=A(n),this.h()},l(l){e=w(l,"BUTTON",{class:!0});var o=P(e);s=O(o,n),o.forEach(h),this.h()},h(){N(e,"class","svelte-qrn432")},m(l,o){M(l,e,o),f(e,s)},p(l,o){o&2&&n!==(n=l[20]+"")&&x(s,n)},d(l){l&&h(e)}}}function zt(t){let e,n,s,l=t[17].title+"",o,i,c,g,d,r=Ht(t[17].href)+"",u,v,S,G,F,q,B,j,J=t[2](t[17])+"",_,U,it,L,H,K=t[17].clicked+"",at,rt,_t,y,ht,X=Et(t[17].added)+"",ut,ft,W,ct,R=Et(t[17].last)+"",p,mt,a,m,k;function Y(){return t[16](t[17])}let $=t[17].tags&&Rt(t);return F=new oe({props:{id:Number(t[17].id)}}),{c(){e=T("li"),n=T("div"),s=T("a"),o=A(l),c=D(),g=T("button"),d=A("("),u=A(r),v=A(")"),S=D(),$&&$.c(),G=D(),tt(F.$$.fragment),q=D(),B=T("div"),j=T("span"),_=A(J),U=A(" points"),it=D(),L=T("span"),H=A("used "),at=A(K),rt=A(" times"),_t=D(),y=T("span"),ht=A("added "),ut=A(X),ft=D(),W=T("span"),ct=A("last used "),p=A(R),mt=D(),this.h()},l(I){e=w(I,"LI",{});var C=P(e);n=w(C,"DIV",{});var b=P(n);s=w(b,"A",{href:!0,target:!0,class:!0});var pt=P(s);o=O(pt,l),pt.forEach(h),c=E(b),g=w(b,"BUTTON",{class:!0});var Ct=P(g);d=O(Ct,"("),u=O(Ct,r),v=O(Ct,")"),Ct.forEach(h),S=E(b),$&&$.l(b),G=E(b),et(F.$$.fragment,b),b.forEach(h),q=E(C),B=w(C,"DIV",{});var Z=P(B);j=w(Z,"SPAN",{class:!0});var qt=P(j);_=O(qt,J),U=O(qt," points"),qt.forEach(h),it=E(Z),L=w(Z,"SPAN",{class:!0});var Dt=P(L);H=O(Dt,"used "),at=O(Dt,K),rt=O(Dt," times"),Dt.forEach(h),_t=E(Z),y=w(Z,"SPAN",{class:!0});var At=P(y);ht=O(At,"added "),ut=O(At,X),At.forEach(h),ft=E(Z),W=w(Z,"SPAN",{class:!0});var Ot=P(W);ct=O(Ot,"last used "),p=O(Ot,R),Ot.forEach(h),Z.forEach(h),mt=E(C),C.forEach(h),this.h()},h(){N(s,"href",i=t[17].href),N(s,"target","_blank"),N(s,"class","svelte-qrn432"),N(g,"class","svelte-qrn432"),N(j,"class","svelte-qrn432"),N(L,"class","svelte-qrn432"),N(y,"class","svelte-qrn432"),N(W,"class","svelte-qrn432")},m(I,C){M(I,e,C),f(e,n),f(n,s),f(s,o),f(n,c),f(n,g),f(g,d),f(g,u),f(g,v),f(n,S),$&&$.m(n,null),f(n,G),st(F,n,null),f(e,q),f(e,B),f(B,j),f(j,_),f(j,U),f(B,it),f(B,L),f(L,H),f(L,at),f(L,rt),f(B,_t),f(B,y),f(y,ht),f(y,ut),f(B,ft),f(B,W),f(W,ct),f(W,p),f(e,mt),a=!0,m||(k=lt(s,"click",Y),m=!0)},p(I,C){t=I,(!a||C&2)&&l!==(l=t[17].title+"")&&x(o,l),(!a||C&2&&i!==(i=t[17].href))&&N(s,"href",i),(!a||C&2)&&r!==(r=Ht(t[17].href)+"")&&x(u,r),t[17].tags?$?$.p(t,C):($=Rt(t),$.c(),$.m(n,G)):$&&($.d(1),$=null);const b={};C&2&&(b.id=Number(t[17].id)),F.$set(b),(!a||C&2)&&J!==(J=t[2](t[17])+"")&&x(_,J),(!a||C&2)&&K!==(K=t[17].clicked+"")&&x(at,K),(!a||C&2)&&X!==(X=Et(t[17].added)+"")&&x(ut,X),(!a||C&2)&&R!==(R=Et(t[17].last)+"")&&x(p,R)},i(I){a||(V(F.$$.fragment,I),a=!0)},o(I){Q(F.$$.fragment,I),a=!1},d(I){I&&h(e),$&&$.d(),nt(F),m=!1,k()}}}function re(t){let e,n,s,l,o,i,c,g,d,r,u,v,S,G,F,q,B,j,J,_="export",U,it="import",L,H,K;function at(a){t[4](a)}let rt={field:"alpha",initDesc:!1,active:t[0]==="alpha"};t[1]!==void 0&&(rt.list=t[1]),l=new kt({props:rt}),gt.push(()=>vt(l,"list",at)),l.$on("sort",t[5]);function _t(a){t[6](a)}let y={field:"score",func:t[2],active:t[0]==="score"};t[1]!==void 0&&(y.list=t[1]),c=new kt({props:y}),gt.push(()=>vt(c,"list",_t)),c.$on("sort",t[7]);function ht(a){t[8](a)}let X={field:"clicked",func:ue,active:t[0]==="clicked"};t[1]!==void 0&&(X.list=t[1]),r=new kt({props:X}),gt.push(()=>vt(r,"list",ht)),r.$on("sort",t[9]);function ut(a){t[11](a)}let ft={field:"added",func:t[10],active:t[0]==="added"};t[1]!==void 0&&(ft.list=t[1]),S=new kt({props:ft}),gt.push(()=>vt(S,"list",ut)),S.$on("sort",t[12]);function W(a){t[14](a)}let ct={field:"accessed",func:t[13],active:t[0]==="accessed"};t[1]!==void 0&&(ct.list=t[1]),q=new kt({props:ct}),gt.push(()=>vt(q,"list",W)),q.$on("sort",t[15]);let R=St(t[1]),p=[];for(let a=0;a<R.length;a+=1)p[a]=zt(Jt(t,R,a));const mt=a=>Q(p[a],1,1,()=>{p[a]=null});return{c(){e=D(),n=T("h1"),s=A(`Bookmarks\r
	`),tt(l.$$.fragment),i=D(),tt(c.$$.fragment),d=D(),tt(r.$$.fragment),v=D(),tt(S.$$.fragment),F=D(),tt(q.$$.fragment),j=D(),J=T("button"),J.textContent=_,U=T("button"),U.textContent=it,L=D(),H=T("ol");for(let a=0;a<p.length;a+=1)p[a].c();this.h()},l(a){Xt("svelte-1ta4p12",document.head).forEach(h),e=E(a),n=w(a,"H1",{class:!0});var k=P(n);s=O(k,`Bookmarks\r
	`),et(l.$$.fragment,k),i=E(k),et(c.$$.fragment,k),d=E(k),et(r.$$.fragment,k),v=E(k),et(S.$$.fragment,k),F=E(k),et(q.$$.fragment,k),j=E(k),J=w(k,"BUTTON",{class:!0,"data-svelte-h":!0}),$t(J)!=="svelte-qzadbk"&&(J.textContent=_),U=w(k,"BUTTON",{class:!0,"data-svelte-h":!0}),$t(U)!=="svelte-15b1cur"&&(U.textContent=it),k.forEach(h),L=E(a),H=w(a,"OL",{});var Y=P(H);for(let $=0;$<p.length;$+=1)p[$].l(Y);Y.forEach(h),this.h()},h(){document.title="Bookmark manager",N(J,"class","svelte-qrn432"),N(U,"class","svelte-qrn432"),N(n,"class","svelte-qrn432")},m(a,m){M(a,e,m),M(a,n,m),f(n,s),st(l,n,null),f(n,i),st(c,n,null),f(n,d),st(r,n,null),f(n,v),st(S,n,null),f(n,F),st(q,n,null),f(n,j),f(n,J),f(n,U),M(a,L,m),M(a,H,m);for(let k=0;k<p.length;k+=1)p[k]&&p[k].m(H,null);K=!0},p(a,[m]){const k={};m&1&&(k.active=a[0]==="alpha"),!o&&m&2&&(o=!0,k.list=a[1],bt(()=>o=!1)),l.$set(k);const Y={};m&1&&(Y.active=a[0]==="score"),!g&&m&2&&(g=!0,Y.list=a[1],bt(()=>g=!1)),c.$set(Y);const $={};m&1&&($.active=a[0]==="clicked"),!u&&m&2&&(u=!0,$.list=a[1],bt(()=>u=!1)),r.$set($);const I={};m&1&&(I.active=a[0]==="added"),!G&&m&2&&(G=!0,I.list=a[1],bt(()=>G=!1)),S.$set(I);const C={};if(m&1&&(C.active=a[0]==="accessed"),!B&&m&2&&(B=!0,C.list=a[1],bt(()=>B=!1)),q.$set(C),m&14){R=St(a[1]);let b;for(b=0;b<R.length;b+=1){const pt=Jt(a,R,b);p[b]?(p[b].p(pt,m),V(p[b],1)):(p[b]=zt(pt),p[b].c(),V(p[b],1),p[b].m(H,null))}for(Yt(),b=R.length;b<p.length;b+=1)mt(b);Zt()}},i(a){if(!K){V(l.$$.fragment,a),V(c.$$.fragment,a),V(r.$$.fragment,a),V(S.$$.fragment,a),V(q.$$.fragment,a);for(let m=0;m<R.length;m+=1)V(p[m]);K=!0}},o(a){Q(l.$$.fragment,a),Q(c.$$.fragment,a),Q(r.$$.fragment,a),Q(S.$$.fragment,a),Q(q.$$.fragment,a),p=p.filter(Boolean);for(let m=0;m<p.length;m+=1)Q(p[m]);K=!1},d(a){a&&(h(e),h(n),h(L),h(H)),nt(l),nt(c),nt(r),nt(S),nt(q),Vt(p,a)}}}function Ht(t){return t.replace(/^https?:\/\/([^\/]+).*$/,"$1")}const ue=t=>t.clicked;function fe(t,e,n){let s;Ut(t,z,_=>n(1,s=_));const l=_=>{const U=Math.floor((new Date-new Date(_.last))/864e5)||0;return Math.floor(_.clicked*100/(U+1))};s.sort((_,U)=>l(_)-l(U)).reverse();let o="score";function i(_){_.clicked+=1,_.last=new Date,z.set(s)}function c(_){s=_,z.set(s)}const g=()=>n(0,o="alpha");function d(_){s=_,z.set(s)}const r=()=>n(0,o="score");function u(_){s=_,z.set(s)}const v=()=>n(0,o="clicked"),S=_=>Date.parse(_.added);function G(_){s=_,z.set(s)}const F=()=>n(0,o="added"),q=_=>_.last?Date.parse(_.last):0;function B(_){s=_,z.set(s)}return[o,s,l,i,c,g,d,r,u,v,S,G,F,q,B,()=>n(0,o="accessed"),_=>i(_)]}class ce extends wt{constructor(e){super(),Nt(this,e,fe,re,Tt,{})}}function de(t){let e,n,s,l;return e=new se({}),s=new ce({}),{c(){tt(e.$$.fragment),n=D(),tt(s.$$.fragment)},l(o){et(e.$$.fragment,o),n=E(o),et(s.$$.fragment,o)},m(o,i){st(e,o,i),M(o,n,i),st(s,o,i),l=!0},p:ot,i(o){l||(V(e.$$.fragment,o),V(s.$$.fragment,o),l=!0)},o(o){Q(e.$$.fragment,o),Q(s.$$.fragment,o),l=!1},d(o){o&&h(n),nt(e,o),nt(s,o)}}}class pe extends wt{constructor(e){super(),Nt(this,e,null,de,Tt,{})}}export{pe as component};
